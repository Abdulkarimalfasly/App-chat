<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>๐ฆ ุดุงุช ูุชูู ุงูุนูุฑุจ</title>
    <link rel="stylesheet" href__="style.css">
    <link rel="stylesheet" href__="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- ุดุงุดุฉ ุชุณุฌูู ุงูุฏุฎูู -->
    <div id="loginScreen" class="screen active">
        <div class="login-container">
            <div class="login-header">
                <div class="logo">
                    <h1>๐ฆ ุดุงุช ูุชูู ุงูุนูุฑุจ</h1>
                    <p>ููุตุฉ ุงูุชูุงุตู ุงูุงุฌุชูุงุนู ุงูุฃููู</p>
                </div>
            </div>
            
            <div class="login-tabs">
                <button class="tab-btn active" onclick="showLoginTab('login')">
                    <i class="fas fa-sign-in-alt"></i>
                    ุชุณุฌูู ุงูุฏุฎูู
                </button>
                <button class="tab-btn" onclick="showLoginTab('register')">
                    <i class="fas fa-user-plus"></i>
                    ุฅูุดุงุก ุญุณุงุจ
                </button>
                <button class="tab-btn" onclick="showLoginTab('guest')">
                    <i class="fas fa-user-secret"></i>
                    ุฏุฎูู ูุฒุงุฆุฑ
                </button>
            </div>
            
            <!-- ุชุณุฌูู ุงูุฏุฎูู -->
            <form id="loginForm" class="auth-form active">
                <div class="input-group">
                    <i class="fas fa-envelope"></i>
                    <input type="email" id="loginEmail" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="loginPassword" placeholder="ูููุฉ ุงููุฑูุฑ" required>
                </div>
                <button type="submit" class="auth-btn">
                    <i class="fas fa-sign-in-alt"></i>
                    ุฏุฎูู
                </button>
            </form>
            
            <!-- ุฅูุดุงุก ุญุณุงุจ -->
            <form id="registerForm" class="auth-form">
                <div class="input-group">
                    <i class="fas fa-user"></i>
                    <input type="text" id="registerDisplayName" placeholder="ุงูุงุณู ุงููุนุฑูุถ" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-envelope"></i>
                    <input type="email" id="registerEmail" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="registerPassword" placeholder="ูููุฉ ุงููุฑูุฑ" required>
                </div>
                <button type="submit" class="auth-btn">
                    <i class="fas fa-user-plus"></i>
                    ุฅูุดุงุก ุญุณุงุจ
                </button>
            </form>
            
            <!-- ุฏุฎูู ูุฒุงุฆุฑ -->
            <form id="guestForm" class="auth-form">
                <div class="input-group">
                    <i class="fas fa-user"></i>
                    <input type="text" id="guestName" placeholder="ุงูุงุณู ุงููุณุชุฎุฏู" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-birthday-cake"></i>
                    <input type="number" id="guestAge" placeholder="ุงูุนูุฑ" min="13" max="99" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-venus-mars"></i>
                    <select id="guestGender" required>
                        <option value="">ุงุฎุชุฑ ุงูุฌูุณ</option>
                        <option value="ุฐูุฑ">ุฐูุฑ</option>
                        <option value="ุฃูุซู">ุฃูุซู</option>
                        <option value="ุขุฎุฑ">ุขุฎุฑ</option>
                    </select>
                </div>
                <button type="submit" class="auth-btn">
                    <i class="fas fa-user-secret"></i>
                    ุฏุฎูู ูุฒุงุฆุฑ
                </button>
            </form>
            
            <div id="loginError" class="error-message"></div>
        </div>
    </div>

    <!-- ุดุงุดุฉ ุงูุญุธุฑ -->
    <div id="banScreen" class="screen">
        <div class="ban-container">
            <div class="ban-icon">๐ซ</div>
            <h2>ุชู ุญุธุฑู ูู ุงูุฏุฎูู</h2>
            <div id="banReason" class="ban-reason">
                <p>ูู ูุชู ุชุญุฏูุฏ ุณุจุจ ุงูุญุธุฑ</p>
            </div>
            <div class="contact-info">
                <p>ููุชูุงุตู ูุงูุงุณุชูุณุงุฑ:</p>
                <a href__="mailto:njdj9985@gmail.com">njdj9985@gmail.com</a>
            </div>
            <button onclick="checkBanStatus()" class="btn btn-primary">
                <i class="fas fa-sync-alt"></i>
                ุงูุชุญูู ูู ุญุงูุฉ ุงูุญุธุฑ
            </button>
        </div>
    </div>

    <!-- ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ -->
    <div id="mainScreen" class="screen">
        <!-- ุงูุดุฑูุท ุงูุนููู -->
        <header class="main-header">
            <div class="header-left">
                <button class="hamburger-btn" onclick="openMainMenu()">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="app-logo">
                    <h1>๐ฆ ุดุงุช ูุชูู ุงูุนูุฑุจ</h1>
                </div>
            </div>
            
            <div class="header-center">
                <div class="room-selector">
                    <select id="roomSelect" onchange="changeRoom()">
                        <option value="1">ุงูุบุฑูุฉ ุงูุฑุฆูุณูุฉ</option>
                    </select>
                </div>
            </div>
            
            <div class="header-right">
                <!-- ุฅุดุนุงุฑ ุงููุชู -->
                <div id="muteNotification" class="mute-notification" style="display: none;">
                    <i class="fas fa-volume-mute"></i>
                    <span id="muteTimeLeft">05:00</span>
                </div>
                
                <button class="header-btn" onclick="openNotifications()" title="ุงูุฅุดุนุงุฑุงุช">
                    <i class="fas fa-bell"></i>
                    <span id="notificationCount" class="notification-badge">0</span>
                </button>
                <button class="header-btn" onclick="openSoundSettings()" title="ุฅุนุฏุงุฏุงุช ุงูุฃุตูุงุช">
                    <i class="fas fa-volume-up"></i>
                </button>
                <button class="header-btn" onclick="openSettings()" title="ุงูุฅุนุฏุงุฏุงุช">
                    <i class="fas fa-cog"></i>
                </button>
                <div class="user-profile-mini" onclick="openProfileModal()">
                    <img id="headerUserAvatar" class="user-avatar-mini" src="https://images.pexels.com/photos/771742/pexels-photo-771742.jpeg?auto=compress&cs=tinysrgb&w=100&h=100&fit=crop" alt="">
                    <div class="user-info-mini">
                        <span id="headerUserName" class="user-name">ุงููุณุชุฎุฏู</span>
                        <span id="headerUserRank" class="user-rank">ุฒุงุฆุฑ</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- ุงููุญุชูู ุงูุฑุฆูุณู -->
        <main class="main-content enhanced">
            <!-- ููุทูุฉ ุงูุฏุฑุฏุดุฉ ุงููุญุณููุฉ -->
            <div class="chat-area enhanced">
                <div class="chat-header compact">
                    <h2 id="currentRoomName">ุงูุบุฑูุฉ ุงูุฑุฆูุณูุฉ</h2>
                    <div class="chat-controls">
                        <span id="onlineCountHeader" class="online-indicator">
                            <i class="fas fa-circle online-dot"></i>
                            <span id="onlineNumber">0</span> ูุชุตู
                        </span>
                        <button class="control-btn" onclick="toggleChatMode()" title="ุชุจุฏูู ูุถุน ุงูุฏุฑุฏุดุฉ">
                            <i class="fas fa-exchange-alt"></i>
                            <span id="chatModeText">ุนุงู</span>
                        </button>
                        <button class="control-btn" onclick="clearChat()" title="ูุณุญ ุงูุฏุฑุฏุดุฉ" id="clearChatBtn" style="display: none;">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
                
                <div id="messagesContainer" class="messages-container enhanced">
                    <div class="welcome-message">
                        <div class="welcome-content">
                            <h3>๐ฆ ูุฑุญุจุงู ุจู ูู ุดุงุช ูุชูู ุงูุนูุฑุจ</h3>
                            <p>ุงุจุฏุฃ ูุญุงุฏุซุฉ ุฌุฏูุฏุฉ ุฃู ุงูุถู ูููุญุงุฏุซุงุช ุงูุฌุงุฑูุฉ</p>
                        </div>
                    </div>
                </div>
                
                <!-- ูุธุงู ุงูุญูุงูุฉ ูู ุงูููุถุงูุงุช -->
                <div id="floodProtectionWarning" class="flood-warning" style="display: none;">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>ุชุญุฐูุฑ: ูุง ุชุฑุณู ุฑุณุงุฆู ุจุณุฑุนุฉ ูุจูุฑุฉ ูุชุฌูุจ ุงููุชู ุงูุชููุงุฆู!</span>
                </div>
                
                <div class="message-input-container enhanced">
                    <div class="input-tools compact">
                        <button class="tool-btn" onclick="document.getElementById('imageInput').click()" title="ุฅุฑุณุงู ุตูุฑุฉ">
                            <i class="fas fa-image"></i>
                        </button>
                        <button class="tool-btn" onclick="toggleVoiceRecording()" title="ุชุณุฌูู ุตูุชู" id="voiceBtn">
                            <i class="fas fa-microphone"></i>
                        </button>
                        <button class="tool-btn" onclick="openEmojiPicker()" title="ุงูุฑููุฒ ุงูุชุนุจูุฑูุฉ">
                            <i class="fas fa-smile"></i>
                        </button>
                        <button class="tool-btn" onclick="openGifPicker()" title="ุตูุฑ ูุชุญุฑูุฉ">
                            <i class="fas fa-magic"></i>
                        </button>
                    </div>
                    
                    <div class="message-input-wrapper">
                        <div class="quoted-message" id="quotedMessage" style="display: none;">
                            <div class="quoted-content">
                                <span class="quoted-author"></span>
                                <span class="quoted-text"></span>
                            </div>
                            <button class="cancel-quote" onclick="cancelQuote()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <input type="text" id="messageInput" placeholder="ุงูุชุจ ุฑุณุงูุชู ููุง..." maxlength="1000">
                        <button class="send-btn" onclick="sendMessage()" id="sendBtn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                        
                        <!-- ูุคุดุฑ ุงููุชู -->
                        <div id="mutedInputOverlay" class="muted-input-overlay" style="display: none;">
                            <i class="fas fa-volume-mute"></i>
                            <span>ุชู ูุชูู ููุฏุฉ <span id="muteTimeDisplay">05:00</span></span>
                        </div>
                    </div>
                    
                    <input type="file" id="imageInput" accept="image/*" style="display: none;">
                    <input type="file" id="voiceInput" accept="audio/*" style="display: none;">
                </div>
            </div>

            <!-- ุงูุดุฑูุท ุงูุฌุงูุจู ูููุณุชุฎุฏููู ุงููุญุณูู -->
            <aside class="users-sidebar enhanced">
                <div class="sidebar-header compact">
                    <h3>ุงููุชุตููู ุงูุขู</h3>
                    <span id="onlineCount" class="online-count">0</span>
                </div>
                <div id="onlineUsersList" class="users-list compact">
                    <!-- ุณูุชู ููุคูุง ุจุงูุฌุงูุงุณูุฑูุจุช -->
                </div>
            </aside>
        </main>

        <!-- ุดุฑูุท ุงูุชุญูู ุงูุณููู -->
        <div class="bottom-control-bar compact">
            <button class="control-btn" onclick="reloadPage()" title="ุชุญุฏูุซ ุงูุตูุญุฉ">
                <i class="fas fa-sync-alt"></i>
            </button>
            <button class="control-btn" onclick="openRadioPlayer()" title="ุงูุฑุงุฏูู">
                <i class="fas fa-radio"></i>
            </button>
            <div class="music-controls">
                <button class="control-btn" onclick="toggleMusicPlayer()" title="ูุดุบู ุงูููุณููู" id="musicToggle">
                    <i class="fas fa-music"></i>
                </button>
                <div class="volume-control">
                    <i class="fas fa-volume-up"></i>
                    <input type="range" id="volumeSlider" min="0" max="100" value="50">
                </div>
            </div>
            <div class="now-playing" id="nowPlaying" style="display: none;">
                <span class="song-title">ูุง ููุฌุฏ ุชุดุบูู</span>
            </div>
        </div>
    </div>

    <!-- ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ -->
    <div id="mainMenuModal" class="modal">
        <div class="modal-content main-menu">
            <div class="modal-header">
                <h2>ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</h2>
                <button class="close-btn" onclick="closeMainMenu()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="menu-items">
                <div class="menu-item" onclick="openNewsSection()">
                    <i class="fas fa-newspaper"></i>
                    <span>ุงูุฃุฎุจุงุฑ</span>
                    <p>ุงูุดุฑ ุงูุฃุฎุจุงุฑ ูุงูุชุญุฏูุซุงุช ูุน ุงูุฅุนุฌุงุจุงุช ูุงูุชุนูููุงุช</p>
                </div>
                <div class="menu-item" onclick="openStoriesSection()">
                    <i class="fas fa-images"></i>
                    <span>ุงููุตุต ุงูููููุฉ</span>
                    <p>ุดุงุฑู ูุตุชู ุงูููููุฉ</p>
                </div>
                
                <div class="menu-item" onclick="openSendNotificationModal()">
                    <i class="fas fa-bell"></i>
                    <span>ุฅุฑุณุงู ุฅุดุนุงุฑ</span>
                    <p>ุฅุฑุณุงู ุฅุดุนุงุฑ ูุฃู ุดุฎุต</p>
                </div>
                
                <div class="menu-item" onclick="openOnlineUsersModal()">
                    <i class="fas fa-users"></i>
                    <span>ุงููุชุตููู ุญุงููุงู</span>
                    <p>ุนุฑุถ ูุงุฆูุฉ ุงููุชุตููู ููููุงุชูู ุงูุดุฎุตูุฉ</p>
                </div>
                
                <div class="menu-item" onclick="openPrivateChatBox()">
                    <i class="fas fa-comment-dots"></i>
                    <span>ุตูุฏูู ุงูุฏุฑุฏุดุฉ ุงูุฎุงุตุฉ</span>
                    <p>ุฏุฑุฏุดุฉ ุฎุงุตุฉ ูููุตูุฉ ููุงุถุญุฉ</p>
                </div>
                <div class="menu-item" onclick="openGamesSection()">
                    <i class="fas fa-gamepad"></i>
                    <span>ุงูุฃูุนุงุจ</span>
                    <p>ุงูุนุจ ูุน ุงูุฃุตุฏูุงุก</p>
                </div>
                <div class="menu-item" onclick="openQuizRoom()">
                    <i class="fas fa-question-circle"></i>
                    <span>ุบุฑูุฉ ุงููุณุงุจูุงุช</span>
                    <p>ุงุฎุชุจุฑ ูุนูููุงุชู ูุงุฑุจุญ ุงูููุงุท</p>
                </div>
                <div class="menu-item" onclick="openRoomsManager()" id="roomsManagerBtn" style="display: none;">
                    <i class="fas fa-door-open"></i>
                    <span>ุฅุฏุงุฑุฉ ุงูุบุฑู</span>
                    <p>ุฅูุดุงุก ูุฅุฏุงุฑุฉ ุงูุบุฑู</p>
                </div>
                <div class="menu-item" onclick="openCoinsShop()">
                    <i class="fas fa-coins"></i>
                    <span>ูุชุฌุฑ ุงูููุงุท</span>
                    <p>ุงุดุชุฑู ุงููููุฒุงุช ุจุงูููุงุท</p>
                </div>
                <div class="menu-item" onclick="openAdminPanel()" id="adminPanelBtn" style="display: none;">
                    <i class="fas fa-crown"></i>
                    <span>ููุญุฉ ุงูุฅุฏุงุฑุฉ</span>
                    <p>ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงููุธุงู</p>
                </div>
                <div class="menu-item" onclick="showRanksInfo()">
                    <i class="fas fa-crown"></i>
                    <span>ูุนูููุงุช ุงูุฑุชุจ</span>
                    <p>ุชุนุฑู ุนูู ุงูุฑุชุจ ููููุฒุงุชูุง</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุงูุฃุฎุจุงุฑ ุงููุญุณูู ูุน ุงูุฅุนุฌุงุจุงุช ูุงูุชุนูููุงุช -->
    <div id="newsModal" class="modal">
        <div class="modal-content news-modal enhanced">
            <div class="modal-header">
                <h2>๐ฐ ููุงุฉ ุงูุฃุฎุจุงุฑ</h2>
                <button class="close-btn" onclick="closeNewsModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="news-content">
                <div class="news-post-form">
                    <textarea id="newsContentInput" placeholder="ุงูุชุจ ุฎุจุฑูุง..." maxlength="500"></textarea>
                    <div class="news-form-actions">
                        <input type="file" id="newsFileInput" accept="image/*,video/*" style="display: none;">
                        <button onclick="document.getElementById('newsFileInput').click()" class="btn btn-secondary">
                            <i class="fas fa-image"></i>
                            ุงุฎุชุฑ ุตูุฑุฉ ุฃู ููุฏูู
                        </button>
                        <button onclick="postNews()" class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i>
                            ูุดุฑ
                        </button>
                    </div>
                </div>
                <div id="newsFeed" class="news-feed enhanced">
                    <!-- ุณูุชู ููุคูุง ุจุงูุฌุงูุงุณูุฑูุจุช -->
                </div>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุตูุฏูู ุงูุฏุฑุฏุดุฉ ุงูุฎุงุตุฉ ุงููุญุณูู -->
    <div id="privateChatBox" class="private-chat-box enhanced" style="display: none;">
        <div class="chat-box-header">
            <div class="chat-box-info">
                <h3 class="chat-box-title">๐ฌ ุฏุฑุฏุดุฉ ุฎุงุตุฉ</h3>
                <span id="privateChatStatus" class="chat-status">ุงุฎุชุฑ ูุณุชุฎุฏู</span>
            </div>
            <div class="chat-box-controls">
                <button class="chat-box-btn" onclick="minimizePrivateChatBox()" title="ุชุตุบูุฑ">
                    <i class="fas fa-minus"></i>
                </button>
                <button class="chat-box-btn" onclick="maximizePrivateChatBox()" title="ุชูุจูุฑ">
                    <i class="fas fa-expand"></i>
                </button>
                <button class="chat-box-btn" onclick="closePrivateChatBox()" title="ุฅุบูุงู">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        <div class="chat-box-body">
            <div class="private-chat-users">
                <select id="privateChatUserSelect" onchange="selectPrivateChatUser()">
                    <option value="">ุงุฎุชุฑ ูุณุชุฎุฏู ููุฏุฑุฏุดุฉ...</option>
                </select>
                <button class="refresh-users-btn" onclick="refreshPrivateChatUsers()" title="ุชุญุฏูุซ ูุงุฆูุฉ ุงููุณุชุฎุฏููู">
                    <i class="fas fa-sync-alt"></i>
                </button>
            </div>
            <div id="privateChatMessages" class="private-chat-messages enhanced">
                <div class="no-chat-selected">
                    <i class="fas fa-comments"></i>
                    <p>ุงุฎุชุฑ ูุณุชุฎุฏู ูุจุฏุก ุงููุญุงุฏุซุฉ ุงูุฎุงุตุฉ</p>
                </div>
            </div>
            <div class="private-chat-input">
                <input type="text" id="privateChatInput" placeholder="ุงูุชุจ ุฑุณุงูุฉ..." onkeypress="if(event.key==='Enter') sendPrivateChatMessage()">
                <button class="private-chat-send" onclick="sendPrivateChatMessage()">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุฅุนุฏุงุฏุงุช ุงูุฃุตูุงุช ุงูุฌุฏูุฏ -->
    <div id="soundSettingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>๐ ุฅุนุฏุงุฏุงุช ุงูุฃุตูุงุช</h2>
                <button class="close-btn" onclick="closeSoundSettings()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="sound-settings-content">
                <div class="sound-category">
                    <h3><i class="fas fa-comment"></i> ุฃุตูุงุช ุงูุฏุฑุฏุดุฉ</h3>
                    <div class="sound-control">
                        <label>ุงูุฑุณุงุฆู ุงูุนุงูุฉ</label>
                        <div class="sound-toggle">
                            <input type="checkbox" id="publicMessageSound" checked>
                            <label for="publicMessageSound" class="toggle-switch"></label>
                        </div>
                        <input type="range" id="publicMessageVolume" min="0" max="100" value="50" class="volume-slider">
                    </div>
                    <div class="sound-control">
                        <label>ุงูุฑุณุงุฆู ุงูุฎุงุตุฉ</label>
                        <div class="sound-toggle">
                            <input type="checkbox" id="privateMessageSound" checked>
                            <label for="privateMessageSound" class="toggle-switch"></label>
                        </div>
                        <input type="range" id="privateMessageVolume" min="0" max="100" value="70" class="volume-slider">
                    </div>
                </div>
                
                <div class="sound-category">
                    <h3><i class="fas fa-bell"></i> ุฃุตูุงุช ุงูุฅุดุนุงุฑุงุช</h3>
                    <div class="sound-control">
                        <label>ุฅุดุนุงุฑุงุช ุนุงูุฉ</label>
                        <div class="sound-toggle">
                            <input type="checkbox" id="notificationSound" checked>
                            <label for="notificationSound" class="toggle-switch"></label>
                        </div>
                        <input type="range" id="notificationVolume" min="0" max="100" value="60" class="volume-slider">
                    </div>
                    <div class="sound-control">
                        <label>ุฏุฎูู ูุฎุฑูุฌ ุงููุณุชุฎุฏููู</label>
                        <div class="sound-toggle">
                            <input type="checkbox" id="joinLeaveSound" checked>
                            <label for="joinLeaveSound" class="toggle-switch"></label>
                        </div>
                        <input type="range" id="joinLeaveVolume" min="0" max="100" value="30" class="volume-slider">
                    </div>
                </div>
                
                <div class="sound-category">
                    <h3><i class="fas fa-phone"></i> ุฃุตูุงุช ุงูููุงููุงุช</h3>
                    <div class="sound-control">
                        <label>ูุบูุฉ ุงูุงุชุตุงู</label>
                        <div class="sound-toggle">
                            <input type="checkbox" id="callRingSound" checked>
                            <label for="callRingSound" class="toggle-switch"></label>
                        </div>
                        <input type="range" id="callRingVolume" min="0" max="100" value="80" class="volume-slider">
                    </div>
                    <div class="sound-control">
                        <label>ุฅุดุนุงุฑุงุช ุงูููุงููุงุช</label>
                        <div class="sound-toggle">
                            <input type="checkbox" id="callNotificationSound" checked>
                            <label for="callNotificationSound" class="toggle-switch"></label>
                        </div>
                        <input type="range" id="callNotificationVolume" min="0" max="100" value="70" class="volume-slider">
                    </div>
                </div>
                
                <div class="sound-actions">
                    <button onclick="testAllSounds()" class="btn btn-secondary">
                        <i class="fas fa-play"></i>
                        ุงุฎุชุจุงุฑ ุฌููุน ุงูุฃุตูุงุช
                    </button>
                    <button onclick="saveSoundSettings()" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        ุญูุธ ุงูุฅุนุฏุงุฏุงุช
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ูุนูููุงุช ุงูุฑุชุจ -->
    <div id="ranksInfoModal" class="modal">
        <div class="modal-content ranks-info-modal">
            <div class="modal-header">
                <h2>๐ ูุนูููุงุช ุงูุฑุชุจ ูุงููููุฒุงุช</h2>
                <button class="close-btn" onclick="closeRanksInfo()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="ranks-info-content">
                <div class="rank-card">
                    <div class="rank-header">
                        <i class="fas fa-user-secret rank-icon"></i>
                        <h3>ุฒุงุฆุฑ</h3>
                        <span class="rank-level">ุงููุณุชูู 0</span>
                    </div>
                    <div class="rank-features">
                        <p>โข ุฏุฑุฏุดุฉ ุนุงูุฉ</p>
                        <p>โข ุนุฑุถ ุงูููู ุงูุดุฎุตู</p>
                        <p>โข ูุดุงุฑูุฉ ุงูุตูุฑ</p>
                    </div>
                </div>

                <div class="rank-card">
                    <div class="rank-header bronze">
                        <i class="fas fa-medal rank-icon"></i>
                        <h3>ุนุถู ุจุฑููุฒู</h3>
                        <span class="rank-level">ุงููุณุชูู 1</span>
                    </div>
                    <div class="rank-features">
                        <p>โข ุฌููุน ูููุฒุงุช ุงูุฒุงุฆุฑ</p>
                        <p>โข ุชุบููุฑ ููู ุงูุงุณู</p>
                        <p>โข ุฑุณุงุฆู ุฎุงุตุฉ</p>
                    </div>
                </div>

                <div class="rank-card">
                    <div class="rank-header silver">
                        <i class="fas fa-trophy rank-icon"></i>
                        <h3>ุนุถู ูุถู</h3>
                        <span class="rank-level">ุงููุณุชูู 2</span>
                    </div>
                    <div class="rank-features">
                        <p>โข ุฌููุน ูููุฒุงุช ุงูุจุฑููุฒู</p>
                        <p>โข ุฅุถุงูุฉ ููุณููู ููุจุฑููุงูู</p>
                        <p>โข ุชุฎุตูุต ุฎูููุฉ ุงูุฑุณุงุฆู</p>
                        <p>โข ุฒุฎุฑูุฉ ุงูุงุณู ุงูุฃุณุงุณูุฉ</p>
                    </div>
                </div>

                <div class="rank-card">
                    <div class="rank-header gold">
                        <i class="fas fa-crown rank-icon"></i>
                        <h3>ุนุถู ุฐูุจู</h3>
                        <span class="rank-level">ุงููุณุชูู 3</span>
                    </div>
                    <div class="rank-features">
                        <p>โข ุฌููุน ูููุฒุงุช ุงููุถู</p>
                        <p>โข ุฅุถุงูุฉ ุฎูููุฉ ูุฎุตุตุฉ ููุบุฑูุฉ</p>
                        <p>โข ุฅูุดุงุก ุบุฑู ุฎุงุตุฉ</p>
                        <p>โข ุฒุฎุงุฑู ูุชูุฏูุฉ ููุงุณู</p>
                    </div>
                </div>

                <div class="rank-card">
                    <div class="rank-header diamond">
                        <i class="fas fa-gem rank-icon"></i>
                        <h3>ุนุถู ุงููุงุณ</h3>
                        <span class="rank-level">ุงููุณุชูู 4</span>
                    </div>
                    <div class="rank-features">
                        <p>โข ุฌููุน ูููุฒุงุช ุงูุฐูุจู</p>
                        <p>โข ุชุฃุซูุฑุงุช ุฎุงุตุฉ ููุฑุณุงุฆู</p>
                        <p>โข ุฃููููุฉ ูู ุงููุณุงุจูุงุช</p>
                        <p>โข ุดุงุฑุฉ ูููุฒุฉ ุจุฌุงูุจ ุงูุงุณู</p>
                    </div>
                </div>

                <div class="rank-card">
                    <div class="rank-header admin">
                        <i class="fas fa-shield-alt rank-icon"></i>
                        <h3>ุฅุฏุงุฑู</h3>
                        <span class="rank-level">ูููุฒ</span>
                    </div>
                    <div class="rank-features">
                        <p>โข ุฌููุน ุงููููุฒุงุช ุงูุณุงุจูุฉ</p>
                        <p>โข ุญุธุฑ ููุชู ุงููุณุชุฎุฏููู</p>
                        <p>โข ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุนุงูุฉ</p>
                        <p>โข ุฅุฏุงุฑุฉ ุงูุบุฑู ูุงููุญุชูู</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุบุฑูุฉ ุงููุณุงุจูุงุช ุงููุญุณูู -->
    <div id="quizRoomModal" class="modal">
        <div class="modal-content quiz-room-modal enhanced">
            <div class="modal-header">
                <h2>๐ ุบุฑูุฉ ุงููุณุงุจูุงุช</h2>
                <div class="quiz-controls">
                    <button class="quiz-setting-btn" onclick="toggleQuizNotifications()" title="ุฅููุงู/ุชุดุบูู ุงูุฅุดุนุงุฑุงุช">
                        <i class="fas fa-bell-slash" id="quizNotificationIcon"></i>
                    </button>
                    <button class="close-btn" onclick="closeQuizRoom()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="quiz-content">
                <div class="quiz-stats enhanced">
                    <div class="stat-item">
                        <i class="fas fa-coins"></i>
                        <span>ููุงุทู:</span>
                        <span id="userQuizPoints" class="stat-value">0</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-ranking-star"></i>
                        <span>ุงูุชุฑุชูุจ:</span>
                        <span id="userQuizRank" class="stat-value">#-</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-trophy"></i>
                        <span>ุงูุฅุฌุงุจุงุช ุงูุตุญูุญุฉ:</span>
                        <span id="correctAnswers" class="stat-value">0</span>
                    </div>
                </div>
                
                <div id="quizQuestion" class="quiz-question enhanced">
                    <div class="question-header">
                        <span class="question-number">ุงูุณุคุงู <span id="currentQuestionNumber">1</span></span>
                        <div class="quiz-timer-container">
                            <div class="quiz-timer-circle">
                                <span id="quizTimer">30</span>
                            </div>
                        </div>
                    </div>
                    <h3 id="questionText" class="question-text">ูุฑุญุจุงู ุจู ูู ุบุฑูุฉ ุงููุณุงุจูุงุช!</h3>
                    <div id="questionOptions" class="question-options enhanced"></div>
                    <div class="question-info">
                        <span class="points-info">+<span id="questionPoints">10</span> ููุทุฉ ููุฅุฌุงุจุฉ ุงูุตุญูุญุฉ</span>
                    </div>
                </div>
                
                <div id="quizLeaderboard" class="quiz-leaderboard enhanced">
                    <h4><i class="fas fa-medal"></i> ููุญุฉ ุงููุชุตุฏุฑูู</h4>
                    <div id="leaderboardList" class="leaderboard-list"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- ุจุงูู ุงูููุฏุงูุงุช... ุณุฃุฑุณู ุจุงูู ุงูููุฏ ูู ุงูุฑุณุงูุฉ ุงูุชุงููุฉ -->

    <!-- ููุฏุงู ุงูููู ุงูุดุฎุตู -->
    <div id="profileModal" class="modal">
        <div class="modal-content profile-modal">
            <div class="modal-header">
                <h2>ุงูููู ุงูุดุฎุตู</h2>
                <button class="close-btn" onclick="closeProfileModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="profile-content">
                <div class="profile-cover">
                    <img id="profileCover" src="https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800&h=300&fit=crop" alt="ุฎูููุฉ ุงูุจุฑููุงูู">
                    <input type="file" id="coverInput" accept="image/*" style="display: none;">
                    <button class="change-cover-btn" onclick="document.getElementById('coverInput').click()">
                        <i class="fas fa-camera"></i>
                        ุชุบููุฑ ุงูุฎูููุฉ
                    </button>
                </div>
                
                <div class="profile-info">
                    <div class="profile-avatar-section">
                        <div class="profile-avatars">
                            <div class="avatar-slot">
                                <img id="profileImg1" src="https://images.pexels.com/photos/771742/pexels-photo-771742.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop" alt="ุตูุฑุฉ 1">
                                <input type="file" id="profileFile1" accept="image/*" style="display: none;">
                                <button onclick="document.getElementById('profileFile1').click()">
                                    <i class="fas fa-camera"></i>
                                </button>
                            </div>
                            <div class="avatar-slot">
                                <img id="profileImg2" src="https://images.pexels.com/photos/1040880/pexels-photo-1040880.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&fit=crop" alt="ุตูุฑุฉ 2">
                                <input type="file" id="profileFile2" accept="image/*" style="display: none;">
                                <button onclick="document.getElementById('profileFile2').click()">
                                    <i class="fas fa-camera"></i>
                                </button>
                            </div>
                        </div>
                        <div class="profile-stats">
                            <div class="stat-item">
                                <span class="stat-number" id="profileLikes">0</span>
                                <span class="stat-label">ุฅุนุฌุงุจ</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="profileCoins">2000</span>
                                <span class="stat-label">ููุทุฉ</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="profileRank">ุฒุงุฆุฑ</span>
                                <span class="stat-label">ุงูุฑุชุจุฉ</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="profile-details">
                        <div class="profile-tabs">
                            <button class="tab-btn active" onclick="showProfileTab('info')">
                                <i class="fas fa-info-circle"></i>
                                ุงููุนูููุงุช
                            </button>
                            <button class="tab-btn" onclick="showProfileTab('settings')">
                                <i class="fas fa-cog"></i>
                                ุงูุฅุนุฏุงุฏุงุช
                            </button>
                            <button class="tab-btn" onclick="showProfileTab('music')">
                                <i class="fas fa-music"></i>
                                ุงูููุณููู
                            </button>
                            <button class="tab-btn" onclick="showProfileTab('decorations')">
                                <i class="fas fa-palette"></i>
                                ุงูุฒุฎุงุฑู
                            </button>
                        </div>
                        
                        <!-- ุชุจููุจ ุงููุนูููุงุช -->
                        <div id="profileInfoTab" class="profile-tab active">
                            <div class="info-section">
                                <label>ุงูุงุณู ุงููุนุฑูุถ:</label>
                                <input type="text" id="displayNameInput" placeholder="ุงุณูู ุงููุนุฑูุถ">
                            </div>
                            <div class="info-section">
                                <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:</label>
                                <input type="email" id="emailInput" placeholder="ุจุฑูุฏู ุงูุฅููุชุฑููู">
                            </div>
                            <div class="info-section">
                                <label>ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ:</label>
                                <input type="password" id="newPasswordInput" placeholder="ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ">
                            </div>
                            <div class="info-section">
                                <label>ุงูุนูุฑ:</label>
                                <input type="number" id="ageInput" min="13" max="100">
                            </div>
                            <div class="info-section">
                                <label>ุงูุฌูุณ:</label>
                                <select id="genderInput">
                                    <option value="">ุบูุฑ ูุญุฏุฏ</option>
                                    <option value="ุฐูุฑ">ุฐูุฑ</option>
                                    <option value="ุฃูุซู">ุฃูุซู</option>
                                </select>
                            </div>
                            <div class="info-section">
                                <label>ุงูุญุงูุฉ ุงูุงุฌุชูุงุนูุฉ:</label>
                                <select id="maritalStatusInput">
                                    <option value="">ุบูุฑ ูุญุฏุฏ</option>
                                    <option value="ุฃุนุฒุจ">ุฃุนุฒุจ</option>
                                    <option value="ูุฑุชุจุท">ูุฑุชุจุท</option>
                                    <option value="ูุชุฒูุฌ">ูุชุฒูุฌ</option>
                                </select>
                            </div>
                            <div class="info-section">
                                <label>ูุจุฐุฉ ุนูู:</label>
                                <textarea id="aboutMeInput" placeholder="ุงูุชุจ ุดูุฆุงู ุนู ููุณู..."></textarea>
                            </div>
                            <button onclick="updateProfile()" class="btn save-btn">
                                <i class="fas fa-save"></i>
                                ุญูุธ ุงูุชุบููุฑุงุช
                            </button>
                        </div>
                        
                        <!-- ุชุจููุจ ุงูุฅุนุฏุงุฏุงุช -->
                        <div id="profileSettingsTab" class="profile-tab">
                            <div class="settings-section">
                                <h4>ููู ุงูุงุณู</h4>
                                <p class="feature-requirement">ูุชุงุญ ูู ุงูุฑุชุจุฉ ุงูุจุฑููุฒูุฉ</p>
                                <input type="color" id="nameColorPicker" value="#ffffff">
                                <button onclick="updateNameColor()" class="btn">ุชุทุจูู ุงูููู</button>
                            </div>
                            <div class="settings-section">
                                <h4>ููู ุงูุฎุท</h4>
                                <p class="feature-requirement">ูุชุงุญ ูู ุงูุฑุชุจุฉ ุงูุจุฑููุฒูุฉ</p>
                                <input type="color" id="fontColorPicker" value="#000000">
                                <button onclick="updateFontColor()" class="btn">ุชุทุจูู ุงูููู</button>
                            </div>
                            <div class="settings-section">
                                <h4>ุฎูููุฉ ุงูุฑุณุงุฆู</h4>
                                <p class="feature-requirement">ูุชุงุญ ูู ุงูุฑุชุจุฉ ุงููุถูุฉ</p>
                                <input type="file" id="messageBackgroundInput" accept="image/*">
                                <button onclick="uploadMessageBackground()" class="btn">ุชุญุฏูุซ ุงูุฎูููุฉ</button>
                            </div>
                        </div>
                        
                        <!-- ุชุจููุจ ุงูููุณููู -->
                        <div id="profileMusicTab" class="profile-tab">
                            <div class="music-section">
                                <h4>ููุณููู ุงูุจุฑููุงูู</h4>
                                <p class="feature-requirement">ูุชุงุญ ูู ุงูุฑุชุจุฉ ุงููุถูุฉ</p>
                                <input type="file" id="profileMusicInput" accept="audio/*">
                                <div id="currentMusic" class="current-music">
                                    <audio id="profileAudio" controls style="display: none;"></audio>
                                </div>
                                <button onclick="uploadProfileMusic()" class="btn">ุฑูุน ููุณููู</button>
                                <button onclick="removeProfileMusic()" class="btn btn-danger">ุฅุฒุงูุฉ ุงูููุณููู</button>
                            </div>
                        </div>
                        
                        <!-- ุชุจููุจ ุงูุฒุฎุงุฑู -->
                        <div id="profileDecorationsTab" class="profile-tab">
                            <div class="decorations-section">
                                <h4>ุฒุฎุฑูุฉ ุงูุงุณู</h4>
                                <p class="feature-requirement">ุจุนุถ ุงูุฒุฎุงุฑู ุชุชุทูุจ ุฑุชุจ ุนุงููุฉ</p>
                                <select id="nameDecorationSelect">
                                    <option value="">ุจุฏูู ุฒุฎุฑูุฉ</option>
                                    <option value="fire">ูุงุฑ ๐ฅ (ูุถู+)</option>
                                    <option value="star">ูุฌูู โญ (ุจุฑููุฒู+)</option>
                                    <option value="crown">ุชุงุฌ ๐ (ุฐูุจู+)</option>
                                    <option value="diamond">ูุงุณ ๐ (ุงููุงุณ)</option>
                                    <option value="rainbow">ููุณ ูุฒุญ ๐ (ุฐูุจู+)</option>
                                </select>
                                <button onclick="updateNameDecoration()" class="btn">ุชุทุจูู ุงูุฒุฎุฑูุฉ</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุนุฑุถ ููู ุดุฎุตู ุขุฎุฑ -->
    <div id="viewProfileModal" class="modal">
        <div class="modal-content profile-modal">
            <div class="modal-header">
                <h2 id="viewProfileName">ุงูููู ุงูุดุฎุตู</h2>
                <button class="close-btn" onclick="closeViewProfileModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="profile-content">
                <div class="profile-cover">
                    <img id="viewProfileCover" src="" alt="ุฎูููุฉ ุงูุจุฑููุงูู">
                </div>
                
                <div class="profile-info">
                    <div class="profile-avatar-section">
                        <div class="profile-avatars">
                            <div class="avatar-slot">
                                <img id="viewProfileImg1" src="" alt="ุตูุฑุฉ 1">
                            </div>
                            <div class="avatar-slot">
                                <img id="viewProfileImg2" src="" alt="ุตูุฑุฉ 2">
                            </div>
                        </div>
                        <div class="profile-stats">
                            <div class="stat-item">
                                <span class="stat-number" id="viewProfileLikes">0</span>
                                <span class="stat-label">ุฅุนุฌุงุจ</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="viewProfileCoins">0</span>
                                <span class="stat-label">ููุทุฉ</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="viewProfileRank">ุฒุงุฆุฑ</span>
                                <span class="stat-label">ุงูุฑุชุจุฉ</span>
                            </div>
                        </div>
                        <div class="profile-actions">
                            <button onclick="likeProfile()" class="btn like-btn">
                                <i class="fas fa-heart"></i> ุฅุนุฌุงุจ
                            </button>
                            <button onclick="startPrivateChat()" class="btn message-btn">
                                <i class="fas fa-envelope"></i> ุฑุณุงูุฉ
                            </button>
                        </div>
                    </div>
                    
                    <div class="profile-details">
                        <div id="viewProfileInfo" class="profile-info-display">
                            <!-- ุณูุชู ููุคูุง ุจุงูุฌุงูุงุณูุฑูุจุช -->
                        </div>
                        <div id="viewProfileMusic" class="profile-music-display">
                            <!-- ููุณููู ุงูุจุฑููุงูู -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุงูุฅุฌุฑุงุกุงุช ุงูุฅุฏุงุฑูุฉ -->
    <div id="userActionsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ุฅุฌุฑุงุกุงุช ุงููุณุชุฎุฏู</h2>
                <button class="close-btn" onclick="closeUserActionsModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="user-actions">
                <div class="user-info">
                    <img id="actionUserAvatar" src="" alt="">
                    <span id="actionUserName"></span>
                    <span id="actionUserRank" class="user-rank-badge"></span>
                </div>
                <div class="actions-grid">
                    <button onclick="viewUserProfile()" class="action-btn">
                        <i class="fas fa-user"></i>
                        <span>ุนุฑุถ ุงูููู ุงูุดุฎุตู</span>
                    </button>
                    <button onclick="startPrivateChat()" class="action-btn">
                        <i class="fas fa-envelope"></i>
                        <span>ุฑุณุงูุฉ ุฎุงุตุฉ</span>
                    </button>
                    <button onclick="openBanUserModal()" class="action-btn ban-btn admin-only">
                        <i class="fas fa-ban"></i>
                        <span>ุญุธุฑ ุฏุงุฆู</span>
                    </button>
                    <button onclick="openMuteUserModal()" class="action-btn mute-btn admin-only">
                        <i class="fas fa-volume-mute"></i>
                        <span>ูุชู ูุคูุช</span>
                    </button>
                    <button onclick="openAssignRankModal()" class="action-btn rank-btn admin-only">
                        <i class="fas fa-crown"></i>
                        <span>ุชุนููู ุฑุชุจุฉ</span>
                    </button>
                    <button onclick="openGiveCoinsModal()" class="action-btn coins-btn admin-only">
                        <i class="fas fa-coins"></i>
                        <span>ุฅุนุทุงุก ููุงุท</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุฅุฑุณุงู ุฅุดุนุงุฑ -->
    <div id="sendNotificationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>๐ข ุฅุฑุณุงู ุฅุดุนุงุฑ</h2>
                <button class="close-btn" onclick="closeSendNotificationModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="notification-form">
                    <div class="form-group">
                        <label for="notificationRecipient">ุงุฎุชุฑ ุงููุณุชุฎุฏู:</label>
                        <select id="notificationRecipient" class="form-control">
                            <option value="">ุงุฎุชุฑ ูุณุชุฎุฏู...</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="notificationType">ููุน ุงูุฅุดุนุงุฑ:</label>
                        <select id="notificationType" class="form-control">
                            <option value="info">ูุนูููุงุช</option>
                            <option value="success">ูุฌุงุญ</option>
                            <option value="warning">ุชุญุฐูุฑ</option>
                            <option value="error">ุฎุทุฃ</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="notificationMessage">ุฑุณุงูุฉ ุงูุฅุดุนุงุฑ:</label>
                        <textarea id="notificationMessage" class="form-control" placeholder="ุงูุชุจ ุฑุณุงูุฉ ุงูุฅุดุนุงุฑ ููุง..." rows="4"></textarea>
                    </div>
                    
                    <div class="modal-actions">
                        <button onclick="sendNotificationToUser()" class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i>
                            ุฅุฑุณุงู ุงูุฅุดุนุงุฑ
                        </button>
                        <button onclick="closeSendNotificationModal()" class="btn btn-secondary">
                            ุฅูุบุงุก
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุงููุชุตููู ุญุงููุงู -->
    <div id="onlineUsersModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>๐ฅ ุงููุชุตููู ุญุงููุงู</h2>
                <button class="close-btn" onclick="closeOnlineUsersModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="online-users-filter">
                    <input type="text" id="usersSearchInput" placeholder="ุงูุจุญุซ ุนู ูุณุชุฎุฏู..." oninput="filterOnlineUsers()">
                    <select id="rankFilterSelect" onchange="filterOnlineUsers()">
                        <option value="">ุฌููุน ุงูุฑุชุจ</option>
                        <option value="visitor">ุฒุงุฆุฑ</option>
                        <option value="bronze">ุจุฑููุฒู</option>
                        <option value="silver">ูุถู</option>
                        <option value="gold">ุฐูุจู</option>
                        <option value="diamond">ุงููุงุณ</option>
                        <option value="admin">ุฅุฏุงุฑู</option>
                    </select>
                </div>
                <div id="onlineUsersList" class="online-users-list enhanced">
                    <p style="text-align: center; color: var(--text-secondary);">ุฌุงุฑู ุชุญููู ูุงุฆูุฉ ุงููุชุตููู...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-spinner" style="display: none;">
        <div class="spinner"></div>
        <p>ุฌุงุฑู ุงูุชุญููู...</p>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Audio Elements with Better Sounds -->
    <audio id="publicMessageSound" preload="auto">
        <source src="sounds/message.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="privateMessageSound" preload="auto">
        <source src="sounds/private_message.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="notificationSound" preload="auto">
        <source src="sounds/notification.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="joinLeaveSound" preload="auto">
        <source src="sounds/join_leave.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="callRingSound" preload="auto">
        <source src="sounds/call_ring.mp3" type="audio/mpeg">
    </audio>

    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
    <script>
        // ูุธุงู ููุงูุญุฉ ุงูููุถุงูุงุช
        let floodProtection = {
            messageCount: 0,
            timeWindow: 10000, // 10 ุซูุงูู
            maxMessages: 5, // ุฃูุตู 5 ุฑุณุงุฆู ูู 10 ุซูุงูู
            lastReset: Date.now(),
            mutedUntil: 0,
            
            checkFlood: function() {
                const now = Date.now();
                
                // ุฅุนุงุฏุฉ ุชุนููู ุงูุนุฏุงุฏ ูู 10 ุซูุงูู
                if (now - this.lastReset > this.timeWindow) {
                    this.messageCount = 0;
                    this.lastReset = now;
                }
                
                // ุงูุชุญูู ูู ุงููุชู
                if (now < this.mutedUntil) {
                    return false; // ูุง ุฒุงู ููุชูู
                }
                
                this.messageCount++;
                
                // ุฅุฐุง ุชู ุชุฌุงูุฒ ุงูุญุฏ ุงูุฃูุตู
                if (this.messageCount > this.maxMessages) {
                    this.muteUser();
                    return false;
                }
                
                // ุชุญุฐูุฑ ุนูุฏ ุงูุงูุชุฑุงุจ ูู ุงูุญุฏ
                if (this.messageCount >= this.maxMessages - 1) {
                    this.showFloodWarning();
                }
                
                return true;
            },
            
            muteUser: function() {
                const muteTime = 5 * 60 * 1000; // 5 ุฏูุงุฆู
                this.mutedUntil = Date.now() + muteTime;
                
                // ุฅุธูุงุฑ ุฑุณุงูุฉ ูู ุงูุดุงุช
                this.displayMuteMessage();
                
                // ุชุนุทูู ุฅุฏุฎุงู ุงูุฑุณุงุฆู
                this.disableInput();
                
                // ุจุฏุก ุนุฏ ุชูุงุฒูู
                this.startMuteTimer();
                
                // ุฅุฎูุงุก ุชุญุฐูุฑ ุงูููุถุงู
                document.getElementById('floodProtectionWarning').style.display = 'none';
            },
            
            displayMuteMessage: function() {
                const messagesContainer = document.getElementById('messagesContainer');
                const muteMessage = document.createElement('div');
                muteMessage.className = 'system-message mute-message';
                muteMessage.innerHTML = `
                    <i class="fas fa-volume-mute"></i>
                    <span>ุชู ูุชู ${getCurrentUser().name} ููุฏุฉ 5 ุฏูุงุฆู ุจุณุจุจ ุงูููุถุงูุงุช</span>
                `;
                messagesContainer.appendChild(muteMessage);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            },
            
            disableInput: function() {
                const messageInput = document.getElementById('messageInput');
                const sendBtn = document.getElementById('sendBtn');
                const muteOverlay = document.getElementById('mutedInputOverlay');
                
                messageInput.disabled = true;
                sendBtn.disabled = true;
                muteOverlay.style.display = 'flex';
            },
            
            enableInput: function() {
                const messageInput = document.getElementById('messageInput');
                const sendBtn = document.getElementById('sendBtn');
                const muteOverlay = document.getElementById('mutedInputOverlay');
                const muteNotification = document.getElementById('muteNotification');
                
                messageInput.disabled = false;
                sendBtn.disabled = false;
                muteOverlay.style.display = 'none';
                muteNotification.style.display = 'none';
                this.messageCount = 0; // ุฅุนุงุฏุฉ ุชุนููู ุงูุนุฏุงุฏ
            },
            
            startMuteTimer: function() {
                const muteNotification = document.getElementById('muteNotification');
                const muteTimeLeft = document.getElementById('muteTimeLeft');
                const muteTimeDisplay = document.getElementById('muteTimeDisplay');
                
                muteNotification.style.display = 'flex';
                
                const timer = setInterval(() => {
                    const remaining = Math.max(0, this.mutedUntil - Date.now());
                    
                    if (remaining <= 0) {
                        clearInterval(timer);
                        this.enableInput();
                        return;
                    }
                    
                    const minutes = Math.floor(remaining / 60000);
                    const seconds = Math.floor((remaining % 60000) / 1000);
                    const timeStr = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                    
                    muteTimeLeft.textContent = timeStr;
                    muteTimeDisplay.textContent = timeStr;
                }, 1000);
            },
            
            showFloodWarning: function() {
                const warning = document.getElementById('floodProtectionWarning');
                warning.style.display = 'flex';
                
                setTimeout(() => {
                    warning.style.display = 'none';
                }, 3000);
            }
        };

        // ุชุนุฏูู ุฏุงูุฉ ุฅุฑุณุงู ุงูุฑุณุงุฆู
        function sendMessage() {
            // ูุญุต ูุธุงู ููุงูุญุฉ ุงูููุถุงูุงุช ุฃููุงู
            if (!floodProtection.checkFlood()) {
                return; // ููุน ุงูุฅุฑุณุงู
            }
            
            const messageInput = document.getElementById('messageInput');
            const message = messageInput.value.trim();
            
            if (message === '') return;
            
            // ุจุงูู ููุฏ ุงูุฅุฑุณุงู...
            messageInput.value = '';
        }

        // ุฅุนุฏุงุฏุงุช ุงูุฃุตูุงุช ุงููุญุณูุฉ
        const soundSettings = {
            publicMessage: { enabled: true, volume: 0.5 },
            privateMessage: { enabled: true, volume: 0.7 },
            notification: { enabled: true, volume: 0.6 },
            joinLeave: { enabled: true, volume: 0.3 },
            callRing: { enabled: true, volume: 0.8 },
            callNotification: { enabled: true, volume: 0.7 }
        };

        function playSound(soundType) {
            const settings = soundSettings[soundType];
            if (!settings || !settings.enabled) return;
            
            const audioId = soundType + 'Sound';
            const audio = document.getElementById(audioId);
            if (audio) {
                audio.volume = settings.volume;
                audio.play().catch(e => console.log('Could not play sound:', e));
            }
        }

        // ูุธุงู ุงูุฏุฑุฏุดุฉ ุงูุฎุงุตุฉ ุงููุญุณู
        const privateChat = {
            currentChat: null,
            isMinimized: false,
            isMaximized: false,
            
            open: function() {
                document.getElementById('privateChatBox').style.display = 'block';
                this.loadOnlineUsers();
            },
            
            close: function() {
                document.getElementById('privateChatBox').style.display = 'none';
                this.currentChat = null;
            },
            
            minimize: function() {
                const chatBox = document.getElementById('privateChatBox');
                if (this.isMinimized) {
                    chatBox.classList.remove('minimized');
                    this.isMinimized = false;
                } else {
                    chatBox.classList.add('minimized');
                    this.isMinimized = true;
                }
            },
            
            maximize: function() {
                const chatBox = document.getElementById('privateChatBox');
                if (this.isMaximized) {
                    chatBox.classList.remove('maximized');
                    this.isMaximized = false;
                } else {
                    chatBox.classList.add('maximized');
                    this.isMaximized = true;
                }
            },
            
            loadOnlineUsers: function() {
                const select = document.getElementById('privateChatUserSelect');
                // ุชุญุฏูุซ ูุงุฆูุฉ ุงููุณุชุฎุฏููู ุงููุชุตููู
                // ููุฏ ุชุญููู ุงููุณุชุฎุฏููู...
            },
            
            selectUser: function(userId) {
                this.currentChat = userId;
                document.getElementById('privateChatStatus').textContent = 'ูุชุตู ูุน ' + getUserName(userId);
                this.loadChatHistory(userId);
            },
            
            sendMessage: function() {
                if (!this.currentChat) return;
                
                const input = document.getElementById('privateChatInput');
                const message = input.value.trim();
                
                if (message === '') return;
                
                // ุฅุฑุณุงู ุงูุฑุณุงูุฉ
                this.displayMessage(getCurrentUser(), message, true);
                input.value = '';
                
                // ุชุดุบูู ุตูุช ุงูุฑุณุงูุฉ ุงูุฎุงุตุฉ
                playSound('privateMessage');
            }
        };

        // ุชุญุณููุงุช ูุธุงู ุงููุณุงุจูุงุช
        const quizRoom = {
            notificationsEnabled: true,
            currentQuestion: null,
            timer: null,
            
            toggleNotifications: function() {
                this.notificationsEnabled = !this.notificationsEnabled;
                const icon = document.getElementById('quizNotificationIcon');
                
                if (this.notificationsEnabled) {
                    icon.className = 'fas fa-bell';
                } else {
                    icon.className = 'fas fa-bell-slash';
                }
                
                // ุญูุธ ุงูุฅุนุฏุงุฏุงุช ูุญููุงู
                localStorage.setItem('quizNotifications', this.notificationsEnabled);
            },
            
            startNewQuestion: function() {
                // ุฅููุงู ุงูุชุงููุฑ ุงูุณุงุจู
                if (this.timer) {
                    clearInterval(this.timer);
                }
                
                // ุจุฏุก ุณุคุงู ุฌุฏูุฏ ูุน ุชุงููุฑ ุฌุฏูุฏ
                this.startQuestionTimer();
            },
            
            startQuestionTimer: function() {
                let timeLeft = 30;
                const timerDisplay = document.getElementById('quizTimer');
                const timerCircle = document.querySelector('.quiz-timer-circle');
                
                this.timer = setInterval(() => {
                    timeLeft--;
                    timerDisplay.textContent = timeLeft;
                    
                    // ุชุบููุฑ ููู ุงูุชุงููุฑ
                    if (timeLeft <= 10) {
                        timerCircle.classList.add('warning');
                    }
                    if (timeLeft <= 5) {
                        timerCircle.classList.add('critical');
                    }
                    
                    if (timeLeft <= 0) {
                        clearInterval(this.timer);
                        this.timeUp();
                    }
                }, 1000);
            },
            
            close: function() {
                // ุฅููุงู ุงูุชุงููุฑ ุนูุฏ ุงูุฎุฑูุฌ
                if (this.timer) {
                    clearInterval(this.timer);
                    this.timer = null;
                }
                
                // ุฅููุงู ุงูุฅุดุนุงุฑุงุช
                this.notificationsEnabled = false;
                
                document.getElementById('quizRoomModal').style.display = 'none';
            }
        };

        // ุฏูุงู ุงููุณุงุนุฏุฉ
        function openPrivateChatBox() {
            privateChat.open();
        }

        function closePrivateChatBox() {
            privateChat.close();
        }

        function minimizePrivateChatBox() {
            privateChat.minimize();
        }

        function maximizePrivateChatBox() {
            privateChat.maximize();
        }

        function selectPrivateChatUser() {
            const select = document.getElementById('privateChatUserSelect');
            privateChat.selectUser(select.value);
        }

        function sendPrivateChatMessage() {
            privateChat.sendMessage();
        }

        function refreshPrivateChatUsers() {
            privateChat.loadOnlineUsers();
        }

        function openSoundSettings() {
            document.getElementById('soundSettingsModal').style.display = 'block';
        }

        function closeSoundSettings() {
            document.getElementById('soundSettingsModal').style.display = 'none';
        }

        function showRanksInfo() {
            document.getElementById('ranksInfoModal').style.display = 'block';
        }

        function closeRanksInfo() {
            document.getElementById('ranksInfoModal').style.display = 'none';
        }

        function toggleQuizNotifications() {
            quizRoom.toggleNotifications();
        }

        function closeQuizRoom() {
            quizRoom.close();
        }

        function openQuizRoom() {
            document.getElementById('quizRoomModal').style.display = 'block';
        }

        // ุชุญููู ุงูุฅุนุฏุงุฏุงุช ุงููุญููุธุฉ
        document.addEventListener('DOMContentLoaded', function() {
            // ุชุญููู ุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช
            const savedNotifications = localStorage.getItem('quizNotifications');
            if (savedNotifications !== null) {
                quizRoom.notificationsEnabled = JSON.parse(savedNotifications);
            }
            
            // ุชุญููู ุฅุนุฏุงุฏุงุช ุงูุฃุตูุงุช
            const savedSounds = localStorage.getItem('soundSettings');
            if (savedSounds) {
                Object.assign(soundSettings, JSON.parse(savedSounds));
            }
        });

        // ุญูุธ ุฅุนุฏุงุฏุงุช ุงูุฃุตูุงุช
        function saveSoundSettings() {
            // ุฌูุน ุงูููู ูู ุงููููุฐุฌ
            soundSettings.publicMessage.enabled = document.getElementById('publicMessageSound').checked;
            soundSettings.publicMessage.volume = document.getElementById('publicMessageVolume').value / 100;
            
            soundSettings.privateMessage.enabled = document.getElementById('privateMessageSound').checked;
            soundSettings.privateMessage.volume = document.getElementById('privateMessageVolume').value / 100;
            
            soundSettings.notification.enabled = document.getElementById('notificationSound').checked;
            soundSettings.notification.volume = document.getElementById('notificationVolume').value / 100;
            
            soundSettings.joinLeave.enabled = document.getElementById('joinLeaveSound').checked;
            soundSettings.joinLeave.volume = document.getElementById('joinLeaveVolume').value / 100;
            
            soundSettings.callRing.enabled = document.getElementById('callRingSound').checked;
            soundSettings.callRing.volume = document.getElementById('callRingVolume').value / 100;
            
            soundSettings.callNotification.enabled = document.getElementById('callNotificationSound').checked;
            soundSettings.callNotification.volume = document.getElementById('callNotificationVolume').value / 100;
            
            // ุญูุธ ูู ุงูุชุฎุฒูู ุงููุญูู
            localStorage.setItem('soundSettings', JSON.stringify(soundSettings));
            
            // ุฅุบูุงู ุงูููุฏุงู
            closeSoundSettings();
            
            // ุฅุดุนุงุฑ ุจุงูุญูุธ
            showToast('ุชู ุญูุธ ุฅุนุฏุงุฏุงุช ุงูุฃุตูุงุช', 'success');
        }

        function testAllSounds() {
            const sounds = ['publicMessage', 'privateMessage', 'notification', 'joinLeave', 'callRing'];
            let index = 0;
            
            function playNext() {
                if (index < sounds.length) {
                    playSound(sounds[index]);
                    index++;
                    setTimeout(playNext, 1000);
                }
            }
            
            playNext();
        }
    </script>
</body>
</html>
